# Домашнее задание к занятию «Микросервисы: принципы»
Вы работаете в крупной компании, которая строит систему на основе микросервисной архитектуры. Вам как DevOps-специалисту необходимо выдвинуть предложение по организации инфраструктуры для разработки и эксплуатации.

## Задача 1: API Gateway
Предложите решение для обеспечения реализации API Gateway. Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.

Решение должно соответствовать следующим требованиям:

1) маршрутизация запросов к нужному сервису на основе конфигурации,
2) возможность проверки аутентификационной информации в запросах,
3) обеспечение терминации HTTPS.

Обоснуйте свой выбор.

| Вариант | Маршрутизация  | Аутентификация | Терминация |
|----------|---------------|----------------|------------|
| NGINX    |      +        |        +       |      +     |
| Yandex API Gateway | +   |        +       |      +     |
| Azure API Gateway  | +   |        +       |      +     |
| Google Cloud Endpoints | + |      +       |      +     |
| Kong Gateway |      +    |        +       |      +     |

Указанные выше решения пришел удовлетворяют нашим требованиям. Поэтому если нужно выбирать, то необходимо рассматривать дополнительные критерии. Это может быть текущая и будущая инфраструктура. Если мы работаем в облаке AWS, то использовать API GATEWAY от майкрософта или гугла будет весьма странно. Важный критерий это конечно цена продукта. Например, Kong Gateway бесплатный, а Yandex API Gateway - нет.

## Задача 2: Брокер сообщений

Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.

Решение должно соответствовать следующим требованиям:

1) поддержка кластеризации для обеспечения надёжности,
2) хранение сообщений на диске в процессе доставки,
3) высокая скорость работы,
4) поддержка различных форматов сообщений,
5) разделение прав доступа к различным потокам сообщений,
6) простота эксплуатации.

Обоснуйте свой выбор.
| Брокеры | Поддержка кластеризации | Хранение сообщений | Высокая скорость работы | Поддержка форматов сообщений |  Разделение прав доступа к потокам сообщений | Простота эксплуатации |
|---------|-------------------------|--------------------|-------------------------|------------------------------|----------------------------------------------|-----------------------|
| Redis   |                +        |        -           |               ++        |               +              |                          +                   |          +            |
| RabbitMQ	|              +        |        +           |               +-        |               +              |                          +                   |          +            |
| Kafka   |                +        |        +           |               +         |               +              |                          +                   |          +            |
| AWS SQS |                +        |        +           |               +         |               +              |                          +                   |          +            |

Для осуществления выбора необходимо исходить из поставленной задачи. Если смотреть на критерии, то Редис сразу выбывает из-за отсутствия хранения сообщений на диске в процессе доставки, несмотря на свое быстродействие. AWS неплохой, но если только использовать амазоновские мощности. И остается либо RabbitMQ либо Kafka. И тут у каждого решения есть свои плюсы и свои минусы. Поэтому в рамках поставленной задачи они оба подходят, но если говорить про конкретику, то помощь в решении данного вопроса могут оказать две статьи:

https://habr.com/ru/companies/itsumma/articles/416629/

https://habr.com/ru/companies/yandex_praktikum/articles/700608/





